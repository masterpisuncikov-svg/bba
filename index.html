<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Roblox Admin Panel</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap">
    <style>
        /* —Ç–≤–æ–π –ø—Ä–µ–¥—ã–¥—É—â–∏–π CSS –æ—Å—Ç–∞—ë—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é */
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Roboto',sans-serif; }
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
        }
        header { text-align:center; margin-bottom:40px; padding-bottom:20px; border-bottom:2px solid #00adb5; }
        h1 { color:#00adb5; font-size:2.5em; margin-bottom:10px; }
        .subtitle { color:#a0a0a0; font-size:1.1em; }
        .panel { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:30px; margin-bottom:40px; }
        .player-section, .commands-section, .status-section {
            background:rgba(30,30,46,0.7);
            padding:25px;
            border-radius:15px;
            border:1px solid rgba(255,255,255,0.05);
        }
        h2 { color:#00adb5; margin-bottom:20px; font-size:1.5em; display:flex; align-items:center; gap:10px; }
        .input-group { margin-bottom:20px; }
        label { display:block; margin-bottom:8px; color:#a0a0a0; font-weight:500; }
        select, input {
            width:100%;
            padding:12px 15px;
            background:rgba(255,255,255,0.1);
            border:1px solid rgba(255,255,255,0.2);
            border-radius:8px;
            color:white;
            font-size:16px;
        }
        select:focus, input:focus {
            outline:none;
            border-color:#00adb5;
            box-shadow:0 0 0 2px rgba(0,173,181,0.2);
        }
        .buttons-grid {
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
            gap:12px;
            margin-top:20px;
        }
        .btn {
            padding:14px 20px;
            border:none;
            border-radius:10px;
            font-size:15px;
            font-weight:600;
            cursor:pointer;
            transition:all 0.25s ease;
            display:flex;
            align-items:center;
            justify-content:center;
            gap:8px;
        }
        .btn:hover { transform:translateY(-2px); box-shadow:0 5px 15px rgba(0,0,0,0.3); }
        .btn:active { transform:translateY(0); }
        .btn-kill    { background:linear-gradient(135deg,#f44336,#d32f2f); color:white; }
        .btn-speedup { background:linear-gradient(135deg,#ff9800,#f57c00); color:white; }
        .btn-reset   { background:linear-gradient(135deg,#4caf50,#2e7d32); color:white; }
        .btn-custom  { background:linear-gradient(135deg,#2196f3,#1976d2); color:white; margin-top:16px; width:100%; }
        .status-box {
            background:rgba(0,0,0,0.3);
            padding:20px;
            border-radius:10px;
            min-height:100px;
            border:1px solid rgba(255,255,255,0.1);
            margin-top:20px;
        }
        #status p { margin-bottom:10px; line-height:1.6; }
        .loading { animation:pulse 1.5s infinite; }
        @keyframes pulse { 0%,100% {opacity:1;} 50% {opacity:0.6;} }
        .success { color:#4caf50; }
        .error   { color:#f44336; }
        footer {
            text-align:center;
            margin-top:40px;
            color:#888;
            font-size:0.9em;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Roblox Admin Panel</h1>
        <div class="subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞–º–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</div>
    </header>

    <div class="panel">
        <!-- –í—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞ -->
        <div class="player-section">
            <h2>üéØ –í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞</h2>
            <div class="input-group">
                <label for="playerSelect">–ò–≥—Ä–æ–∫:</label>
                <select id="playerSelect">
                    <option value="">‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞ ‚Äî</option>
                    <!-- –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JS -->
                </select>
            </div>
            <small>–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ UserId –≤—Ä—É—á–Ω—É—é –Ω–∏–∂–µ</small>
            <div class="input-group" style="margin-top:12px;">
                <label for="playerId">–†—É—á–Ω–æ–π –≤–≤–æ–¥ UserId:</label>
                <input type="text" id="playerId" placeholder="10987654321" />
            </div>
        </div>

        <!-- –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã -->
        <div class="commands-section">
            <h2>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã</h2>
            <div class="buttons-grid">
                <button class="btn btn-kill"    onclick="sendPreset('kill', null)">üíÄ Kill</button>
                <button class="btn btn-speedup" onclick="sendPreset('speed', 1000)">üöÄ Speed √ó1000</button>
                <button class="btn btn-reset"   onclick="sendPreset('speed', 1)">üîÑ Speed √ó1 (–Ω–æ—Ä–º–∞)</button>
            </div>

            <!-- –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ -->
            <div class="custom-command" style="margin-top:24px;">
                <h3>–ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞</h3>
                <div class="input-group" style="display:flex; gap:10px;">
                    <input type="text" id="customAction" placeholder="–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã (jump, fly...)" />
                    <input type="text" id="customValue" placeholder="–∑–Ω–∞—á–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" />
                </div>
                <button class="btn btn-custom" onclick="sendCustomCommand()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é</button>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç—É—Å -->
        <div class="status-section">
            <h2>üì° –°—Ç–∞—Ç—É—Å</h2>
            <div class="status-box" id="status">
                <p>–û–∂–∏–¥–∞–Ω–∏–µ...</p>
            </div>
            <button class="btn btn-info" onclick="checkServerStatus()" style="margin-top:16px;">
                –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
            </button>
        </div>
    </div>

    <footer>
        –°–µ—Ä–≤–µ—Ä: <span id="serverUrl">–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</span><br>
        <small>–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Roblox-–∏–≥—Ä—ã</small>
    </footer>
</div>

<script>
// === –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ===
const SERVER_URL = "https://early-hopeful-characters--masterpisunciko.replit.app";  // –±–µ–∑ / –≤ –∫–æ–Ω—Ü–µ

const statusElement   = document.getElementById('status');
const serverUrlElement = document.getElementById('serverUrl');
const playerSelect    = document.getElementById('playerSelect');
const playerIdInput   = document.getElementById('playerId');

let isSending = false;
let lastStatusCheck = null;

document.addEventListener('DOMContentLoaded', () => {
    serverUrlElement.textContent = SERVER_URL;
    checkServerStatus();
    loadPlayers();           // ‚Üê –¥–æ–±–∞–≤–ª–µ–Ω–æ
    setInterval(checkServerStatusIfNeeded, 30000);
});

// –ó–∞–≥–ª—É—à–∫–∞ ‚Äî —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É)
function loadPlayers() {
    // –ü–æ–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞
    // –í –±—É–¥—É—â–µ–º –∑–¥–µ—Å—å –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å GET /players ‚Üí –º–∞—Å—Å–∏–≤ –∏–≥—Ä–æ–∫–æ–≤
    const fakePlayers = [
        { id: "123456789", name: "CoolPlayer123" },
        { id: "987654321", name: "NoobMaster69"  },
        { id: "555555555", name: "xXProGamerXx"  },
        { id: "111111111", name: "TestUser"      },
    ];

    playerSelect.innerHTML = '<option value="">‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞ ‚Äî</option>';
    fakePlayers.forEach(p => {
        const opt = document.createElement('option');
        opt.value = p.id;
        opt.textContent = `${p.name} (${p.id})`;
        playerSelect.appendChild(opt);
    });

    // –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –≤ select ‚Üí –∫–æ–ø–∏—Ä—É–µ–º –≤ input
    playerSelect.addEventListener('change', () => {
        playerIdInput.value = playerSelect.value;
    });
}

async function checkServerStatus() { /* ... —Ç–≤–æ–π –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... */ }

function checkServerStatusIfNeeded() { /* ... —Ç–≤–æ–π –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–¥ ... */ }

async function sendPreset(action, value) {
    const playerId = playerIdInput.value.trim() || playerSelect.value;
    if (!playerId) {
        showStatus("‚ö†Ô∏è –í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ ID", "error");
        return;
    }
    await sendCommand(action, value);
}

async function sendCommand(action, value = null) {
    if (isSending) return;
    isSending = true;

    const playerId = (playerIdInput.value.trim() || playerSelect.value).trim();
    if (!playerId) {
        showStatus("‚ö†Ô∏è –£–∫–∞–∂–∏—Ç–µ –∏–≥—Ä–æ–∫–∞", "error");
        isSending = false;
        return;
    }

    showStatus(`üì§ ${action} ‚Üí ${playerId} ...`, "loading");

    try {
        const res = await fetch(`${SERVER_URL}/command`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ playerId, action, value, sentAt: Date.now() })
        });

        const data = await res.json();
        if (data.success) {
            showStatus(`‚úÖ ${action} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (ID: ${data.commandId})`, "success");
            setTimeout(checkServerStatus, 1400);
        } else {
            showStatus(`‚ùå ${data.error || "–æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"}`, "error");
        }
    } catch (err) {
        showStatus(`‚ùå ${err.message}`, "error");
    } finally {
        isSending = false;
    }
}

function sendCustomCommand() {
    const action = document.getElementById('customAction').value.trim();
    let value = document.getElementById('customValue').value.trim();

    if (!action) {
        showStatus("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã", "error");
        return;
    }

    try {
        if (value && (value.startsWith('{') || value.startsWith('['))) {
            value = JSON.parse(value);
        }
    } catch {}

    sendCommand(action, value || null);
}

function showStatus(message, type = "") {
    statusElement.innerHTML = `<p class="${type}">${message}</p>`;
}
</script>
</body>
</html>
